webpackJsonp([14],{AqAz:function(e,t){},txod:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),n={data:function(){return{cronPopover:!1,updateform:{id:0,name:"",description:"",scheduleMode:"MANUAL",cronExpression:"",sourceConnectionId:"请选择",sourceSchema:"",tableType:"TABLE",includeOrExclude:"",sourceTables:[],tableNameMapper:[],columnNameMapper:[],targetConnectionId:"请选择",targetDropTable:!0,targetOnlyCreate:!1,targetSchema:"",batchSize:5e3},rules:{name:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],scheduleMode:[{required:!0,type:"string",message:"调度方式必须选择",trigger:"change"}],sourceConnectionId:[{required:!0,type:"integer",message:"必选选择一个来源端",trigger:"change"}],sourceSchema:[{required:!0,type:"string",message:"必选选择一个Schema名",trigger:"change"}],tableType:[{required:!0,type:"string",message:"表类型必须选择",trigger:"change"}],includeOrExclude:[{required:!0,type:"string",message:"配置方式必须选择",trigger:"change"}],sourceTables:[{required:!1,type:"array",message:"必选选择一个Table名",trigger:"change"}],targetConnectionId:[{required:!0,type:"integer",message:"必选选择一个目的端",trigger:"change"}],targetSchema:[{required:!0,type:"string",message:"必选选择一个Schema名",trigger:"change"}],batchSize:[{required:!0,type:"integer",message:"必选选择一个批大小",trigger:"change"}]},can_go_back:!0,active:5,sourceConnection:{},targetConnection:{},sourceConnectionSchemas:[],sourceSchemaTables:[],targetConnectionSchemas:[],tableNameMapperDialogVisible:!1,columnNameMapperDialogVisible:!1,tableNamesMapperData:[],columnNamesMapperData:[],preiveSeeTableNameList:[],preiveTableName:""}},methods:{handleClose:function(e){},next:function(){this.can_go_back=!1,this.active++>4&&(this.active=5)},pre:function(){this.can_go_back=!1,this.active--<2&&(this.active=1)},handleGoBack:function(){this.can_go_back&&this.$router.go(-1)},loadConnections:function(){var e=this;this.connectionNameList=[],this.$http({method:"GET",url:"/dbswitch/admin/api/v1/connection/list/name"}).then(function(t){0===t.data.code?e.connectionNameList=t.data.data:(e.connectionNameList=[],t.data.message&&alert("加载任务列表失败:"+t.data.message))},function(){console.log("failed")})},loadAssignmentDetail:function(){var e=this;this.$http.get("/dbswitch/admin/api/v1/assignment/detail/id/"+this.$route.query.id).then(function(t){if(0===t.data.code){var a=t.data.data;e.updateform={id:a.id,name:a.name,description:a.description,scheduleMode:a.scheduleMode,cronExpression:a.cronExpression,sourceConnectionId:a.configuration.sourceConnectionId,sourceSchema:a.configuration.sourceSchema,tableType:a.configuration.tableType,includeOrExclude:a.configuration.includeOrExclude,sourceTables:a.configuration.sourceTables,tableNameMapper:a.configuration.tableNameMapper,columnNameMapper:a.configuration.columnNameMapper,targetConnectionId:a.configuration.targetConnectionId,targetDropTable:a.configuration.targetDropTable,targetOnlyCreate:a.configuration.targetOnlyCreate,targetSchema:a.configuration.targetSchema,batchSize:a.configuration.batchSize},e.selectChangedSourceConnection(e.updateform.sourceConnectionId),e.selectUpdateChangedSourceSchema(e.updateform.sourceSchema),e.selectChangedTargetConnection(e.updateform.targetConnectionId)}else t.data.message&&alert("查询任务失败,"+t.data.message)})},changeUpdateCronExpression:function(e){this.updateform.cronExpression=e},selectChangedSourceConnection:function(e){var t=this;this.sourceConnection=this.connectionNameList.find(function(t){return t.id===e}),this.sourceConnectionSchemas=[],this.$http.get("/dbswitch/admin/api/v1/connection/schemas/get/"+e).then(function(e){0===e.data.code?t.sourceConnectionSchemas=e.data.data:(t.$message.error("查询来源端数据库的Schema失败,"+e.data.message),t.sourceConnectionSchemas=[])})},selectUpdateChangedSourceSchema:function(e){var t=this;this.sourceSchemaTables=[],"TABLE"===this.updateform.tableType?this.$http.get("/dbswitch/admin/api/v1/connection/tables/get/"+this.updateform.sourceConnectionId+"?schema="+e).then(function(e){0===e.data.code?t.sourceSchemaTables=e.data.data:(t.$message.error("查询来源端数据库在指定Schema下的物理表列表失败,"+e.data.message),t.sourceSchemaTables=[])}):this.$http.get("/dbswitch/admin/api/v1/connection/views/get/"+this.updateform.sourceConnectionId+"?schema="+e).then(function(e){0===e.data.code?t.sourceSchemaTables=e.data.data:(t.$message.error("查询来源端数据库在指定Schema下的视图表列表失败,"+e.data.message),t.sourceSchemaTables=[])})},selectUpdateChangedTableType:function(e){var t=this;this.sourceSchemaTables=[],"TABLE"===e?this.$http.get("/dbswitch/admin/api/v1/connection/tables/get/"+this.updateform.sourceConnectionId+"?schema="+this.updateform.sourceSchema).then(function(e){0===e.data.code?t.sourceSchemaTables=e.data.data:(t.$message.error("查询来源端数据库在指定Schema下的物理表列表失败,"+e.data.message),t.sourceSchemaTables=[])}):this.$http.get("/dbswitch/admin/api/v1/connection/views/get/"+this.updateform.sourceConnectionId+"?schema="+this.updateform.sourceSchema).then(function(e){0===e.data.code?t.sourceSchemaTables=e.data.data:(t.$message.error("查询来源端数据库在指定Schema下的视图表列表失败,"+e.data.message),t.sourceSchemaTables=[])})},selectChangedTargetConnection:function(e){var t=this;this.targetConnection=this.connectionNameList.find(function(t){return t.id===e}),this.targetConnectionSchemas=[],this.$http.get("/dbswitch/admin/api/v1/connection/schemas/get/"+e).then(function(e){0===e.data.code?t.targetConnectionSchemas=e.data.data:(t.$message.error("查询目的端数据库的Schema失败,"+e.data.message),t.targetConnectionSchemas=[])})},addTableNameMapperListRow:function(){this.updateform.tableNameMapper||(this.updateform.tableNameMapper=[]),this.updateform.tableNameMapper.push({fromPattern:"",toValue:""})},deleteTableNameMapperListItem:function(e){this.updateform.tableNameMapper||(this.updateform.tableNameMapper=[]),this.updateform.tableNameMapper.splice(e,1)},previewTableNameMapList:function(){var e=this;this.updateform.sourceConnectionId<=0||!this.updateform.sourceSchema||0==this.updateform.sourceSchema.length?alert("请选择源端数据源和源端模式名！"):this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/dbswitch/admin/api/v1/mapper/preview/table",data:r()({id:this.updateform.sourceConnectionId,schemaName:this.updateform.sourceSchema,isInclude:"INCLUDE"==this.updateform.includeOrExclude,tableNames:this.updateform.sourceTables,nameMapper:this.updateform.tableNameMapper})}).then(function(t){0===t.data.code?(e.tableNamesMapperData=t.data.data,e.tableNameMapperDialogVisible=!0):t.data.message&&alert(t.data.message)})},addColumnNameMapperListRow:function(){this.updateform.columnNameMapper||(this.updateform.columnNameMapper=[]),this.updateform.columnNameMapper.push({fromPattern:"",toValue:""})},deleteColumnNameMapperListItem:function(e){this.updateform.columnNameMapper||(this.updateform.columnNameMapper=[]),this.updateform.columnNameMapper.splice(e,1)},previewColumnNameMapList:function(){var e=this;if(!this.updateform.sourceConnectionId||this.updateform.sourceConnectionId<=0||!this.updateform.sourceSchema||0==this.updateform.sourceSchema.length)alert("请选择【源端数据源】和【源端模式名】！");else if(this.updateform.includeOrExclude){if("INCLUDE"==this.updateform.includeOrExclude)this.updateform.sourceTables&&this.updateform.sourceTables.length>0?this.preiveSeeTableNameList=this.updateform.sourceTables:this.preiveSeeTableNameList=this.sourceSchemaTables;else{if(0==this.updateform.sourceTables.length)return void alert("请选择排除表的【表名配置】！");this.preiveSeeTableNameList=JSON.parse(r()(this.sourceSchemaTables));for(var t=0;t<this.updateform.sourceTables.length;++t){var a=this.updateform.sourceTables[t];this.preiveSeeTableNameList.some(function(t,o){if(t==a)return e.preiveSeeTableNameList.splice(o,1),!0})}}this.preiveTableName="",this.columnNamesMapperData=[],this.columnNameMapperDialogVisible=!0}else alert("请选择源端表选择的【配置方式】！")},queryPreviewColumnNameMapperList:function(){var e=this;this.preiveSeeTableNameList&&0!=this.preiveSeeTableNameList.length?this.preiveTableName&&0!=this.preiveTableName.length?this.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/dbswitch/admin/api/v1/mapper/preview/column",data:r()({id:this.updateform.sourceConnectionId,schemaName:this.updateform.sourceSchema,isInclude:"INCLUDE"==this.updateform.includeOrExclude,tableName:this.preiveTableName,nameMapper:this.updateform.columnNameMapper})}).then(function(t){0===t.data.code?e.columnNamesMapperData=t.data.data:t.data.message&&alert(t.data.message)}):alert("请选择一个表名！"):alert("请在源端配置【表名配置】！")},handleSave:function(){var e=this;this.$refs.updateform.validate(function(t){t?e.$http({method:"POST",headers:{"Content-Type":"application/json"},url:"/dbswitch/admin/api/v1/assignment/update",data:r()({id:e.$route.query.id,name:e.updateform.name,description:e.updateform.description,scheduleMode:e.updateform.scheduleMode,cronExpression:e.updateform.cronExpression,config:{sourceConnectionId:e.updateform.sourceConnectionId,sourceSchema:e.updateform.sourceSchema,tableType:e.updateform.tableType,includeOrExclude:e.updateform.includeOrExclude,sourceTables:e.updateform.sourceTables,targetConnectionId:e.updateform.targetConnectionId,targetSchema:e.updateform.targetSchema,tableNameMapper:e.updateform.tableNameMapper,columnNameMapper:e.updateform.columnNameMapper,targetDropTable:!0,targetOnlyCreate:e.updateform.targetOnlyCreate,batchSize:e.updateform.batchSize}})}).then(function(t){0===t.data.code?(e.$message("修改任务成功"),e.$router.push("/task/assignment")):t.data.message&&alert(t.data.message)}):alert("请点击【上一步】检查输入")})}},created:function(){this.loadConnections(),this.loadAssignmentDetail()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基本信息配置"}}),e._v(" "),a("el-step",{attrs:{title:"同步源端配置"}}),e._v(" "),a("el-step",{attrs:{title:"目标端配置"}}),e._v(" "),a("el-step",{attrs:{title:"映射转换配置"}}),e._v(" "),a("el-step",{attrs:{title:"配置确认提交"}})],1),e._v(" "),a("el-form",{ref:"updateform",attrs:{model:e.updateform,"status-icon":"",rules:e.rules}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}]},[a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"名称","label-width":"240px",required:!0,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateform.name,callback:function(t){e.$set(e.updateform,"name",t)},expression:"updateform.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"描述","label-width":"240px",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:3,"auto-complete":"off"},model:{value:e.updateform.description,callback:function(t){e.$set(e.updateform,"description",t)},expression:"updateform.description"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"调度方式","label-width":"240px",required:!0,prop:"scheduleMode"}},[a("el-select",{model:{value:e.updateform.scheduleMode,callback:function(t){e.$set(e.updateform,"scheduleMode",t)},expression:"updateform.scheduleMode"}},[a("el-option",{attrs:{label:"手动调度",value:"MANUAL"}}),e._v(" "),a("el-option",{attrs:{label:"系统调度",value:"SYSTEM_SCHEDULED"}})],1)],1),e._v(" "),"SYSTEM_SCHEDULED"==e.updateform.scheduleMode?a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"Cron表达式","label-width":"240px"}},[a("el-col",{attrs:{span:10}},[a("el-popover",{model:{value:e.cronPopover,callback:function(t){e.cronPopover=t},expression:"cronPopover"}},[a("vueCron",{attrs:{i18n:"cn"},on:{change:e.changeUpdateCronExpression,close:function(t){e.cronPopover=!1}}}),e._v(" "),a("el-input",{attrs:{slot:"reference",disabled:!1,placeholder:"点击选择或手动输入",size:"small"},on:{click:function(t){e.cronPopover=!0}},slot:"reference",model:{value:e.updateform.cronExpression,callback:function(t){e.$set(e.updateform,"cronExpression",t)},expression:"updateform.cronExpression"}})],1)],1)],1):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}]},[a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"源端数据源","label-width":"240px",required:!0,prop:"sourceConnectionId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChangedSourceConnection},model:{value:e.updateform.sourceConnectionId,callback:function(t){e.$set(e.updateform,"sourceConnectionId",t)},expression:"updateform.sourceConnectionId"}},e._l(e.connectionNameList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"]"+e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"源端模式名","label-width":"240px",required:!0,prop:"sourceSchema"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectUpdateChangedSourceSchema},model:{value:e.updateform.sourceSchema,callback:function(t){e.$set(e.updateform,"sourceSchema",t)},expression:"updateform.sourceSchema"}},e._l(e.sourceConnectionSchemas,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"源端表类型","label-width":"240px",required:!0,prop:"tableType"}},[a("el-select",{attrs:{placeholder:"请选择表类型"},on:{change:e.selectUpdateChangedTableType},model:{value:e.updateform.tableType,callback:function(t){e.$set(e.updateform,"tableType",t)},expression:"updateform.tableType"}},[a("el-option",{attrs:{label:"物理表",value:"TABLE"}}),e._v(" "),a("el-option",{attrs:{label:"视图表",value:"VIEW"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"配置方式","label-width":"240px",required:!0,prop:"includeOrExclude"}},[a("el-select",{attrs:{placeholder:"请选择配置方式"},model:{value:e.updateform.includeOrExclude,callback:function(t){e.$set(e.updateform,"includeOrExclude",t)},expression:"updateform.includeOrExclude"}},[a("el-option",{attrs:{label:"包含表",value:"INCLUDE"}}),e._v(" "),a("el-option",{attrs:{label:"排除表",value:"EXCLUDE"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"表名配置","label-width":"240px",required:!1,prop:"sourceTables"}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            当为包含表时，选择所要精确包含的表名，如果不选则代表选择所有；当为排除表时，选择索要精确排除的表名。\n          ")]),e._v(" "),a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择表名",multiple:""},model:{value:e.updateform.sourceTables,callback:function(t){e.$set(e.updateform,"sourceTables",t)},expression:"updateform.sourceTables"}},e._l(e.sourceSchemaTables,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active == 3"}]},[a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"目的端数据源","label-width":"240px",required:!0,prop:"targetConnectionId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChangedTargetConnection},model:{value:e.updateform.targetConnectionId,callback:function(t){e.$set(e.updateform,"targetConnectionId",t)},expression:"updateform.targetConnectionId"}},e._l(e.connectionNameList,function(e,t){return a("el-option",{key:t,attrs:{label:"["+e.id+"]"+e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"目的端模式名","label-width":"240px",required:!0,prop:"targetSchema"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateform.targetSchema,callback:function(t){e.$set(e.updateform,"targetSchema",t)},expression:"updateform.targetSchema"}},e._l(e.targetConnectionSchemas,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"只创建表","label-width":"240px",required:!0,prop:"targetOnlyCreate"}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v('\n            只再目标端创建表，不同步数据内容；如果配置为“是”，则下面的“数据处理批次大小"将无效。\n          ')]),e._v(" "),a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-select",{model:{value:e.updateform.targetOnlyCreate,callback:function(t){e.$set(e.updateform,"targetOnlyCreate",t)},expression:"updateform.targetOnlyCreate"}},[a("el-option",{attrs:{label:"是",value:!0}}),e._v(" "),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"65%"},attrs:{label:"数据处理批次大小","label-width":"240px",required:!0,prop:"batchSize"}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            数据同步时单个批次处理的行记录总数，该值越到越占用内存空间。建议：小字段表设置为10000或20000，大字段表设置为1000\n          ")]),e._v(" "),a("i",{staticClass:"el-icon-question"})]),e._v(" "),a("el-select",{model:{value:e.updateform.batchSize,callback:function(t){e.$set(e.updateform,"batchSize",t)},expression:"updateform.batchSize"}},[a("el-option",{attrs:{label:"1000",value:1e3}}),e._v(" "),a("el-option",{attrs:{label:"5000",value:5e3}}),e._v(" "),a("el-option",{attrs:{label:"10000",value:1e4}}),e._v(" "),a("el-option",{attrs:{label:"20000",value:2e4}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==e.active,expression:"active == 4"}]},[a("div",{staticClass:"tip-content"},[a("p",[e._v("说明：(1) 当表名映射规则记录为空时，代表目标表名与源表名的名称相同;")]),e._v(" "),a("p",[e._v("          \n          (2) 当字段名映射规则记录为空时，代表目标表的字段名与源表名的字段名相同")]),e._v(" "),a("p",[e._v("          \n          (3) 在字段名映射规则中，如果目标字段名为空（未填写），则代表剔除该字段（不能是主键）的同步")])]),e._v(" "),a("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addTableNameMapperListRow()}}},[e._v("添加表名映射")]),e._v(" "),a("el-button",{attrs:{type:"warning",round:""},on:{click:function(t){return e.previewTableNameMapList()}}},[e._v("预览表名映射")]),e._v(" "),a("el-table",{staticStyle:{width:"90%","margin-top":"15px"},attrs:{data:e.updateform.tableNameMapper,size:"mini",border:"",height:"200"}},[a("template",{slot:"empty"},[a("span",[e._v('请点击"添加表名映射"按钮添加表名映射关系记录')])]),e._v(" "),a("el-table-column",{attrs:{label:"表名匹配的正则名",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"string"},model:{value:t.row.fromPattern,callback:function(a){e.$set(t.row,"fromPattern",a)},expression:"scope.row.fromPattern"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"替换的目标值",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"string"},model:{value:t.row.toValue,callback:function(a){e.$set(t.row,"toValue",a)},expression:"scope.row.toValue"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTableNameMapperListItem(t.$index)}}},[e._v("删除")])]}}])})],2),e._v(" "),a("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addColumnNameMapperListRow()}}},[e._v("添加字段名映射")]),e._v(" "),a("el-button",{attrs:{type:"warning",round:""},on:{click:function(t){return e.previewColumnNameMapList()}}},[e._v("预览字段名映射")]),e._v(" "),a("el-table",{staticStyle:{width:"90%","margin-top":"15px"},attrs:{data:e.datas=e.updateform.columnNameMapper,size:"mini",border:"",height:"200"}},[a("template",{slot:"empty"},[a("span",[e._v('请点击"添加字段名映射"按钮添加字段名映射关系记录')])]),e._v(" "),a("el-table-column",{attrs:{label:"字段名匹配的正则名",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"string"},model:{value:t.row.fromPattern,callback:function(a){e.$set(t.row,"fromPattern",a)},expression:"scope.row.fromPattern"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"替换的目标值",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"string"},model:{value:t.row.toValue,callback:function(a){e.$set(t.row,"toValue",a)},expression:"scope.row.toValue"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteColumnNameMapperListItem(t.$index)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:5==e.active,expression:"active == 5"}]},[a("el-descriptions",{attrs:{size:"small",column:1,"label-class-name":"el-descriptions-item-label-class",border:""}},[a("el-descriptions-item",{attrs:{label:"任务名称"}},[e._v(e._s(e.updateform.name))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"任务描述"}},[e._v(e._s(e.updateform.description))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"调度方式"}},["MANUAL"==e.updateform.scheduleMode?a("span",[e._v("\n            手动执行\n          ")]):e._e(),e._v(" "),"SYSTEM_SCHEDULED"==e.updateform.scheduleMode?a("span",[e._v("\n            系统调度\n          ")]):e._e()]),e._v(" "),"SYSTEM_SCHEDULED"==e.updateform.scheduleMode?a("el-descriptions-item",{attrs:{label:"CRON表达式"}},[e._v(e._s(e.updateform.cronExpression))]):e._e(),e._v(" "),a("el-descriptions-item",{attrs:{label:"源端数据源"}},[e._v("["+e._s(e.updateform.sourceConnectionId)+"]"+e._s(e.sourceConnection.name))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"源端schema"}},[e._v(e._s(e.updateform.sourceSchema))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"源端表类型"}},[e._v(e._s(e.updateform.tableType))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"源端表选择方式"}},["INCLUDE"==e.updateform.includeOrExclude?a("span",[e._v("\n            包含表\n          ")]):e._e(),e._v(" "),"EXCLUDE"==e.updateform.includeOrExclude?a("span",[e._v("\n            排除表\n          ")]):e._e()]),e._v(" "),a("el-descriptions-item",{attrs:{label:"源端表名列表"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"INCLUDE"==e.updateform.includeOrExclude&&(!e.updateform.sourceTables||0==e.updateform.sourceTables.length),expression:"updateform.includeOrExclude == 'INCLUDE' && (!updateform.sourceTables || updateform.sourceTables.length==0)"}]},[a("b",[e._v("所有物理表")])]),e._v(" "),e._l(e.updateform.sourceTables,function(t){return a("p",{key:t},[e._v(e._s(t))])})],2),e._v(" "),a("el-descriptions-item",{attrs:{label:"目地端数据源"}},[e._v("["+e._s(e.updateform.targetConnectionId)+"]"+e._s(e.targetConnection.name))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"目地端schema"}},[e._v(e._s(e.updateform.targetSchema))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"只创建表"}},[e._v(e._s(e.updateform.targetOnlyCreate))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"数据处理批次量"}},[e._v(e._s(e.updateform.batchSize))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"表名映射规则"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.updateform.tableNameMapper||0==e.updateform.tableNameMapper.length,expression:"!updateform.tableNameMapper || updateform.tableNameMapper.length==0"}]},[e._v("[映射关系为空]")]),e._v(" "),e.updateform.tableNameMapper&&e.updateform.tableNameMapper.length>0?a("table",{staticClass:"name-mapper-table"},[a("tr",[a("th",[e._v("表名匹配的正则名")]),e._v(" "),a("th",[e._v("替换的目标值")])]),e._v(" "),e._l(e.updateform.tableNameMapper,function(t,o){return a("tr",{key:o},[a("td",[e._v(e._s(t.fromPattern))]),e._v(" "),a("td",[e._v(e._s(t.toValue))])])})],2):e._e()]),e._v(" "),a("el-descriptions-item",{attrs:{label:"字段名映射规则"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.updateform.columnNameMapper||0==e.updateform.columnNameMapper.length,expression:"!updateform.columnNameMapper || updateform.columnNameMapper.length==0"}]},[e._v("[映射关系为空]")]),e._v(" "),e.updateform.columnNameMapper&&e.updateform.columnNameMapper.length>0?a("table",{staticClass:"name-mapper-table"},[a("tr",[a("th",[e._v("字段名匹配的正则名")]),e._v(" "),a("th",[e._v("替换的目标值")])]),e._v(" "),e._l(e.updateform.columnNameMapper,function(t,o){return a("tr",{key:o},[a("td",[e._v(e._s(t.fromPattern))]),e._v(" "),a("td",[e._v(e._s(t.toValue))])])})],2):e._e()])],1)],1)]),e._v(" "),e.active>1?a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{round:""},on:{click:e.pre}},[e._v("\n    上一步\n  ")]):e._e(),e._v(" "),e.active>0&&e.active<5?a("el-button",{attrs:{round:""},on:{click:e.next}},[e._v("\n    下一步\n  ")]):e._e(),e._v(" "),5!=e.active||e.can_go_back?e._e():a("el-button",{attrs:{round:""},on:{click:e.handleSave}},[e._v("\n    提交\n  ")]),e._v(" "),5==e.active&&e.can_go_back?a("el-button",{attrs:{round:""},on:{click:e.handleGoBack}},[e._v("\n    返回\n  ")]):e._e(),e._v(" "),4==e.active?a("el-dialog",{attrs:{title:"查看表名映射关系",visible:e.tableNameMapperDialogVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.tableNameMapperDialogVisible=t}}},[a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableNamesMapperData,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"originalName",label:"源端表名","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"targetName",label:"目标表名","min-width":"20%"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tableNameMapperDialogVisible=!1}}},[e._v("关闭")])],1)],1):e._e(),e._v(" "),4==e.active?a("el-dialog",{attrs:{title:"查看字段影射关系",visible:e.columnNameMapperDialogVisible,showClose:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.columnNameMapperDialogVisible=t}}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.queryPreviewColumnNameMapperList},model:{value:e.preiveTableName,callback:function(t){e.preiveTableName=t},expression:"preiveTableName"}},e._l(e.preiveSeeTableNameList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.columnNamesMapperData,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"originalName",label:"原始字段名","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"targetName",label:"目标表字段名","min-width":"20%"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.columnNameMapperDialogVisible=!1}}},[e._v("关闭")])],1)],1):e._e()],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(e){a("AqAz")},"data-v-55b72e51",null);t.default=i.exports}});
//# sourceMappingURL=14.caabaf113d764d207ca1.js.map